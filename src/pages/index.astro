---
import BaseLayout from '../layouts/BaseLayout.astro';
import EventModals from '../components/EventModals.astro';
import GalleryModals from '../components/GalleryModals.astro';
import groundsMapScriptUrl from '../scripts/groundsMap.client.js?url';
import { fetchFestivalContent } from '../lib/webeFriendsClient';

const festival = await fetchFestivalContent();
const hero = festival.hero;
const events = festival.events;
const scheduleDays = festival.schedule.days;
const gallery = festival.gallery;
const sponsors = festival.sponsors;
const faqs = festival.faqs;

const pageTitle = hero?.title ?? festival.meta.siteName ?? 'WeBeFriends Integration';
const pageDescription = hero?.description ?? `Latest content powered by WeBeFriends for ${festival.meta.siteName ?? 'this site'}.`;
const ogImage = hero?.background?.src ?? '/images/hero/moonrise.svg';

const eventsById = new Map(events.map((event) => [event.id, event]));
const standardGatesOpen = '10:00 AM';
const scheduleWithEvents = scheduleDays.map((slot) => ({
	...slot,
	gatesOpen: standardGatesOpen,
	events: slot.eventIds
		.map((eventId) => eventsById.get(eventId))
		.filter((event): event is NonNullable<typeof event> => Boolean(event)),
}));

const hasHero = Boolean(hero);
const hasGallery = gallery.length > 0;
const hasSponsors = sponsors.length > 0;
const hasFaqs = faqs.length > 0;
const hasMapsKey = Boolean(import.meta.env.PUBLIC_GOOGLE_MAPS_KEY);
const mapQueryRaw = (import.meta.env.PUBLIC_GOOGLE_MAPS_QUERY ?? 'Yuma Territorial Prison State Historic Park, Yuma AZ').trim();
const mapZoomParsed = Number.parseInt(import.meta.env.PUBLIC_GOOGLE_MAPS_ZOOM ?? '', 10);
const mapZoom = Number.isFinite(mapZoomParsed) ? mapZoomParsed : 15;
const mapId = (import.meta.env.PUBLIC_GOOGLE_MAPS_MAP_ID ?? '').trim();
const mapPreferCloud = (import.meta.env.PUBLIC_GOOGLE_MAPS_USE_MAP_ID ?? '').trim().toLowerCase() === 'true';
const mapLocationLabel = pageTitle;
const mapCoverImage = '/images/Howling%20at%20the%20Moon%20Festival%20Design-2.png';
const mapToggleLabel = hasMapsKey ? 'Click to view the map' : 'Add your map key to enable the map';

const festivalTimeZone = import.meta.env.PUBLIC_FESTIVAL_TIMEZONE ?? 'America/Phoenix';
const eventTimeFormatter = new Intl.DateTimeFormat('en-US', {
	hour: 'numeric',
	minute: '2-digit',
	timeZone: festivalTimeZone,
});

const formatEventTime = (value: string) => {
	const date = new Date(value);
	if (Number.isNaN(date.getTime())) {
		return value;
	}
	return eventTimeFormatter.format(date);
};

const getOrdinal = (value: number) => {
	const modTen = value % 10;
	const modHundred = value % 100;
	if (modTen === 1 && modHundred !== 11) return 'st';
	if (modTen === 2 && modHundred !== 12) return 'nd';
	if (modTen === 3 && modHundred !== 13) return 'rd';
	return 'th';
};

const formatDateLabel = (date: Date, options?: { includeMonth?: boolean }) => {
	const includeMonth = options?.includeMonth ?? true;
	const month = date.toLocaleString('en-US', { month: 'short' });
	const day = date.getDate();
	const suffix = getOrdinal(day);
	return includeMonth ? `${month} ${day}${suffix}` : `${day}${suffix}`;
};

const now = new Date();
const eventsWithTemporalData = events
	.map((event) => {
		const startDate = new Date(event.start);
		const endDate = new Date(event.end);
		return { event, startDate, endDate };
	})
	.filter(({ startDate, endDate }) => !Number.isNaN(startDate.getTime()) && !Number.isNaN(endDate.getTime()))
	.sort((a, b) => a.startDate.getTime() - b.startDate.getTime());

const eventsGroupedByMonth = new Map<string, typeof eventsWithTemporalData>();
eventsWithTemporalData.forEach((entry) => {
	const monthKey = `${entry.startDate.getFullYear()}-${String(entry.startDate.getMonth() + 1).padStart(2, '0')}`;
	const bucket = eventsGroupedByMonth.get(monthKey);
	if (bucket) {
		bucket.push(entry);
	} else {
		eventsGroupedByMonth.set(monthKey, [entry]);
	}
});

const monthlyEventGroups = Array.from(eventsGroupedByMonth.values())
	.map((group) => {
		const sorted = [...group].sort((a, b) => a.startDate.getTime() - b.startDate.getTime());
		const firstDate = sorted[0]?.startDate;
		const finalEndDate = sorted[sorted.length - 1]?.endDate;
		if (!firstDate || !finalEndDate) {
			return undefined;
		}
		const expiry = new Date(finalEndDate);
		expiry.setHours(0, 0, 0, 0);
		expiry.setDate(expiry.getDate() + 1);
		return { events: sorted, firstDate, expiry };
	})
	.filter((group): group is { events: typeof eventsWithTemporalData; firstDate: Date; expiry: Date } => Boolean(group))
	.sort((a, b) => a.firstDate.getTime() - b.firstDate.getTime());

const activeMonthlyGroup =
	monthlyEventGroups.find((group) => now < group.expiry) ??
	monthlyEventGroups.find((group) => group.firstDate.getTime() >= now.getTime()) ??
	monthlyEventGroups[monthlyEventGroups.length - 1];

const featuredEvents = activeMonthlyGroup ? activeMonthlyGroup.events.slice(0, 2).map((entry) => entry.event) : [];
const hasHighlights = featuredEvents.length > 0;
const hasSchedule = scheduleWithEvents.length > 0;

const featuredEventDays = featuredEvents
	.map((event) => new Date(event.start))
	.filter((date) => !Number.isNaN(date.getTime()))
	.sort((a, b) => a.getTime() - b.getTime());

const uniqueFeaturedDays = Array.from(
	new Map(
		featuredEventDays.map((date) => {
			const key = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`;
			return [key, date] as const;
		})
	).values()
);

const nextEventDaysSlice = uniqueFeaturedDays.slice(0, 2);

let nextHowlingHeading = 'Next Howling';
if (nextEventDaysSlice.length === 1) {
	const [first] = nextEventDaysSlice;
	nextHowlingHeading = `Next Howling ${formatDateLabel(first)}`;
} else if (nextEventDaysSlice.length === 2) {
	const [first, second] = nextEventDaysSlice;
	const sameMonth = first.getMonth() === second.getMonth() && first.getFullYear() === second.getFullYear();
	if (sameMonth) {
		const monthLabel = first.toLocaleString('en-US', { month: 'short' });
		nextHowlingHeading = `Next Howling ${monthLabel} ${formatDateLabel(first, { includeMonth: false })} & ${formatDateLabel(second, { includeMonth: false })}`;
	} else {
		nextHowlingHeading = `Next Howling ${formatDateLabel(first)} & ${formatDateLabel(second)}`;
	}
}

const primaryCta = hero?.primaryCta
	? { ...hero.primaryCta, href: 'https://webefriends.com/page/dRh8mZQsh3cm73dDCIEx' }
	: hero?.primaryCta ?? {
		label: 'Get Tickets',
		href: 'https://webefriends.com/page/dRh8mZQsh3cm73dDCIEx',
	};

const secondaryCta = hero?.secondaryCta
	? {
		...hero.secondaryCta,
		label: 'Follow us on Facebook',
		href: 'https://www.facebook.com/groups/256153318091080',
	}
	: {
		label: 'Follow us on Facebook',
		href: 'https://www.facebook.com/groups/256153318091080',
	};
---

<BaseLayout
	title={pageTitle}
	description={pageDescription}
	ogImage={ogImage}
>
	{hasHero && hero && (
		<section
			id="hero"
			class="relative isolate overflow-hidden bg-slate-900/60"
			style={hero.background?.src
				? `background-image: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(30, 41, 59, 0.85)), url(${hero.background.src}); background-size: cover; background-position: center;`
				: undefined}
		>
			<div class="absolute inset-0 bg-slate-950/50 backdrop-blur-sm"></div>
			<img
				src="/images/sky-moon.png"
				alt="Moonlit clouds"
				width="1080"
				height="919"
				loading="eager"
				decoding="async"
				fetchpriority="high"
				class="pointer-events-none absolute left-1/2 -top-28 block w-[160vw] -translate-x-1/2 max-w-none opacity-60 sm:left-auto sm:-right-16 sm:-top-10 sm:w-[115vw] sm:translate-x-0 sm:opacity-75 lg:-right-24 lg:-top-20 lg:w-[120vw]"
			/>
			<div class="relative mx-auto flex w-full max-w-6xl flex-col gap-12 px-6 py-24 lg:flex-row lg:items-center lg:py-32">
				<div class="flex-1 space-y-6">
					{hero.kicker && hero.kicker.toLowerCase() !== 'venue' && (
						<p class="text-xs font-semibold uppercase tracking-[0.5em] text-fuchsia-300/90">
							{hero.kicker}
						</p>
					)}
					<h1 class="text-4xl font-bold tracking-tight text-white sm:text-5xl lg:text-6xl">
						{hero.title}
					</h1>
					{hero.tagline && <p class="text-xl font-light text-slate-200 sm:text-2xl">{hero.tagline}</p>}
					{hero.description && <p class="max-w-xl text-base text-slate-300 sm:text-lg">{hero.description}</p>}
					{(primaryCta || secondaryCta) && (
						<div class="flex flex-wrap gap-4">
							{primaryCta && (
								<a
									href={primaryCta.href}
									class="inline-flex items-center gap-2 rounded-full bg-fuchsia-500 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-slate-950 transition hover:bg-fuchsia-400"
								>
									{primaryCta.label ?? 'Get Tickets'}
								</a>
							)}
							{secondaryCta && (
								<a
									href={secondaryCta.href}
									class="inline-flex items-center gap-2 rounded-full border border-slate-500/70 bg-slate-900/60 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-slate-200 transition hover:border-fuchsia-400 hover:text-white"
								>
									{secondaryCta.label}
								</a>
							)}
							<button
								type="button"
								class="inline-flex items-center gap-2 rounded-full border border-fuchsia-400/70 bg-slate-900/40 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-fuchsia-200 transition hover:bg-fuchsia-500/10 hover:text-white"
								data-open-modal="modal-camping-info"
							>
								Camping
							</button>
						</div>
					)}
				</div>
				<div class="relative w-full flex-1 overflow-hidden rounded-3xl border border-slate-800/70 bg-slate-950/40 shadow-[0_0_35px_-10px_rgba(217,70,239,0.35)] mt-[100px] lg:mt-0 lg:max-w-xl">
					<video
						src="/videos/howl-crowd.mp4"
						autoplay
						loop
						muted
						playsinline
						preload="metadata"
						poster={hero.background?.src}
						class="aspect-video h-full w-full object-cover"
						aria-label="Crowd highlight reel from Howlin at the Moon"
					></video>
					<div class="pointer-events-none absolute inset-0 bg-gradient-to-tr from-slate-950/60 via-transparent to-fuchsia-500/10"></div>
				</div>
			</div>
		</section>
	)}

	{hasHighlights && (
		<section id="highlights" class="border-y border-slate-800 bg-slate-950/80">
		<div class="mx-auto flex w-full max-w-6xl flex-col gap-8 px-6 py-16">
			<div class="flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between">
				<div>
					<h2 class="mt-2 text-3xl font-semibold text-white sm:text-4xl">{nextHowlingHeading}</h2>
				</div>
			</div>
			<div class="grid gap-6 sm:grid-cols-2 sm:justify-items-center">
				{featuredEvents.map((event) => (
					<button
						key={event.id}
						type="button"
						class="group relative w-full max-w-md overflow-hidden rounded-3xl border border-slate-800 bg-slate-900/60 text-left transition hover:border-fuchsia-400/70 hover:shadow-fuchsia-500/20"
						data-open-modal={`modal-${event.id}`}
					>
						<img
							src={event.image.src}
							alt={event.image.alt}
							class="h-48 w-full object-cover object-center transition duration-500 group-hover:scale-105"
						/>
						<div class="flex flex-col gap-3 p-6">
							<p class="text-xs font-semibold uppercase tracking-[0.4em] text-fuchsia-300/90">{event.stage}</p>
							<h3 class="text-xl font-semibold text-white">{event.title}</h3>
							<p class="text-sm text-slate-300">
								{formatEventTime(event.start)} â€¢ {event.dayLabel}
							</p>
							<div class="flex flex-wrap gap-2">
								{event.tags.map((tag) => (
									<span key={tag} class="rounded-full bg-fuchsia-500/20 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-fuchsia-200">
										{tag.replace('-', ' ')}
									</span>
								))}
							</div>
						</div>
					</button>
				))}
			</div>
		</div>
		</section>
	)}

	<section id="grounds-map" class="border-t border-slate-800 bg-slate-950/85">
		<div class="mx-auto flex w-full max-w-6xl flex-col gap-8 px-6 py-20">
			<header class="flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between">
				<div>
					<p class="text-xs font-semibold uppercase tracking-[0.4em] text-cyan-300/80">Find Your Campsite</p>
					<h2 class="text-3xl font-semibold text-white sm:text-4xl">Festival Grounds Map</h2>
				</div>
			</header>
			<div
				data-map-container
				class={`relative overflow-hidden rounded-3xl border ${
					hasMapsKey ? 'border-slate-800 bg-slate-900/60' : 'border-dashed border-slate-700 bg-slate-900/40'
				}`}
				data-map-key={hasMapsKey ? import.meta.env.PUBLIC_GOOGLE_MAPS_KEY : ''}
				data-map-query={mapQueryRaw}
				data-map-zoom={String(mapZoom)}
				data-map-map-id={mapId}
				data-map-use-cloud={mapPreferCloud && mapId ? 'true' : 'false'}
				data-map-label={mapLocationLabel}
			>
				<div data-map-canvas class="hidden h-[420px] w-full"></div>
				<div class="pointer-events-none absolute inset-0 hidden items-center justify-center bg-slate-950/85 text-sm font-semibold uppercase tracking-[0.35em] text-fuchsia-100" data-map-loading>
					Loading mapâ€¦
				</div>
				<div class="pointer-events-none absolute inset-0 hidden items-center justify-center bg-rose-900/80 text-center text-sm font-semibold text-rose-100" data-map-error>
					We couldnâ€™t load the live map. Please check your Google Maps configuration.
				</div>
				<button
					type="button"
					data-map-toggle
					class={`group relative flex h-[420px] w-full items-center justify-center overflow-hidden text-white transition ${
						hasMapsKey ? 'border border-slate-800 hover:border-fuchsia-400/70 hover:shadow-[0_0_35px_-10px_rgba(217,70,239,0.45)]' : 'border border-dashed border-slate-700'
					}`}
					style="cursor: pointer;"
					disabled={!hasMapsKey}
				>
					<img
						src={mapCoverImage}
						alt="Stylized festival map teaser graphic"
						class="absolute inset-0 h-full w-full object-cover opacity-80 transition duration-500 group-hover:scale-105 group-hover:opacity-100"
					/>
					<div class="absolute inset-0 bg-gradient-to-br from-slate-950/85 via-slate-900/70 to-fuchsia-500/20"></div>
					<span class="relative z-10 text-center text-lg font-semibold uppercase tracking-[0.4em] text-fuchsia-100">
						{mapToggleLabel}
					</span>
				</button>
			</div>
			{!hasMapsKey && (
				<p class="text-sm text-slate-400">
					Add a Google Maps API key to the <code class="rounded bg-slate-900 px-2 py-1 text-xs text-slate-200">PUBLIC_GOOGLE_MAPS_KEY</code> variable in your <code class="rounded bg-slate-900 px-2 py-1 text-xs text-slate-200">.env.local</code> file to unlock the live map. Provide a custom location or coordinates with <code class="rounded bg-slate-900 px-2 py-1 text-xs text-slate-200">PUBLIC_GOOGLE_MAPS_QUERY</code> and an optional zoom via <code class="rounded bg-slate-900 px-2 py-1 text-xs text-slate-200">PUBLIC_GOOGLE_MAPS_ZOOM</code>.
				</p>
			)}
		</div>
		<script type="module" src={groundsMapScriptUrl}></script>
	</section>

	{hasSchedule && (
		<section id="schedule" class="bg-slate-950/90">
		<div class="mx-auto flex w-full max-w-6xl flex-col gap-10 px-6 py-20">
			<header class="flex flex-col gap-4">
				<p class="text-xs font-semibold uppercase tracking-[0.4em] text-emerald-300/80">Nightly Flow</p>
				<h2 class="text-3xl font-semibold text-white sm:text-4xl">Full Season Schedule</h2>
				<p class="max-w-3xl text-sm text-slate-300 sm:text-base">
					Remember Howlers â€” due to the unpredictable weather here in the foothills, all events are subject to change without notice. It's always best to check before heading out!
				</p>
			</header>
			<div class="grid gap-6 lg:grid-cols-2">
				{scheduleWithEvents.map((slot) => (
					<div key={slot.dayLabel} class="flex flex-col gap-6 rounded-3xl border border-slate-800 bg-slate-900/60 p-8">
						<div class="flex items-baseline justify-between gap-4">
							<div>
								<p class="text-xs font-semibold uppercase tracking-[0.4em] text-cyan-300/80">{slot.dateLabel}</p>
								<h3 class="text-2xl font-semibold text-white">{slot.dayLabel}</h3>
							</div>
							<p class="text-sm font-semibold uppercase tracking-[0.35em] text-slate-400">Gates {slot.gatesOpen}</p>
						</div>
						<ul class="space-y-4">
							{slot.events.length > 0 ? (
								slot.events.map((event) => (
									<li key={event.id} class="flex flex-col gap-2 rounded-2xl border border-slate-800 bg-slate-950/60 p-4 transition hover:border-fuchsia-400/70">
										<div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
											<div>
												<p class="text-xs font-semibold uppercase tracking-[0.4em] text-slate-400">{event.stage}</p>
												<h4 class="text-lg font-semibold text-white">{event.title}</h4>
											</div>
											<p class="text-sm font-medium text-slate-200">
												{formatEventTime(event.start)}
												<span class="mx-2 text-slate-500">â€“</span>
												{formatEventTime(event.end)}
											</p>
										</div>
										<div class="flex flex-wrap gap-3 text-sm text-slate-300">
											<span class="rounded-full bg-emerald-500/20 px-3 py-1">
												{event.area}
											</span>
											<button
												type="button"
												class="rounded-full border border-slate-600/70 px-4 py-1 text-xs font-semibold uppercase tracking-wide text-slate-100 transition hover:border-fuchsia-400 hover:text-white"
												data-open-modal={`modal-${event.id}`}
											>
												Details
											</button>
										</div>
									</li>
								))
							) : (
								<li class="rounded-2xl border border-dashed border-slate-800 bg-slate-950/40 p-6 text-sm text-slate-400">
									Set list coming soon. Check back once new events are assigned in WeBeFriends.
								</li>
							)}
						</ul>
					</div>
				))}
			</div>
		</div>
		</section>
	)}

	{hasGallery && (
		<section id="gallery" class="border-t border-slate-800 bg-slate-950/80">
		<div class="mx-auto flex w-full max-w-6xl flex-col gap-8 px-6 py-20">
			<header class="flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between">
				<div>
					<p class="text-xs font-semibold uppercase tracking-[0.4em] text-fuchsia-300/80">Scenes</p>
					<h2 class="text-3xl font-semibold text-white sm:text-4xl">Festival Glimpses</h2>
				</div>
				<p class="max-w-xl text-sm text-slate-300">
					Captured moments flowing straight from the WeBeFriends gallery bundle. Adjust or reorder assets from the Integration Studio.
				</p>
			</header>
			<div class="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
				{gallery.map((image, index) => {
					const galleryKey = `gallery-${index}`;
					const modalId = `modal-gallery-${index}`;
					const caption = image.alt || `Festival photo ${index + 1}`;
					return (
						<button
							key={image.src}
							type="button"
							class="group relative overflow-hidden rounded-3xl border border-slate-800 bg-slate-900/50 text-left transition hover:border-fuchsia-400/70 focus:outline-none focus:ring-2 focus:ring-fuchsia-400/60"
							data-gallery-toggle
							data-gallery-target={modalId}
							data-gallery-id={galleryKey}
						>
							<span
								class="absolute left-3 top-3 z-10 flex items-center gap-1 rounded-full bg-slate-950/80 px-3 py-1 text-xs font-semibold text-slate-200"
								data-gallery-badge-wrapper={galleryKey}
								aria-live="polite"
							>
								<span aria-hidden="true">ðŸ’¬</span>
								<span data-gallery-badge={galleryKey}>0</span>
								<span class="sr-only" data-gallery-badge-sr>0 comments on this photo</span>
							</span>
							<img
								src={image.src}
								alt={image.alt}
								class="h-52 w-full object-cover transition duration-500 group-hover:scale-105"
							/>
							<span class="absolute inset-x-0 bottom-0 bg-gradient-to-t from-slate-950/80 via-slate-950/50 to-transparent px-4 py-3 text-xs uppercase tracking-[0.3em] text-slate-200">
								{caption}
							</span>
							<span class="sr-only">Open full view of {caption}</span>
						</button>
					);
				})}
			</div>
		</div>
		</section>
	)}

	{hasSponsors && (
		<section id="sponsors" class="bg-slate-900/70">
		<div class="mx-auto flex w-full max-w-6xl flex-col gap-8 px-6 py-20">
			<header class="flex flex-col gap-3">
				<p class="text-xs font-semibold uppercase tracking-[0.4em] text-emerald-300/80">Partners</p>
				<h2 class="text-3xl font-semibold text-white sm:text-4xl">Powered by the Pack</h2>
				<p class="max-w-2xl text-sm text-slate-300">
					Community sponsors and production partners make the festival glow. Shout-outs update automatically when WeBeFriends publishes new data.
				</p>
			</header>
			<div class="grid gap-6 md:grid-cols-2 xl:grid-cols-4">
				{sponsors.map((sponsor) => (
					<article key={sponsor.name} class="flex flex-col gap-3 rounded-3xl border border-slate-800 bg-slate-950/70 p-6">
						<p class="text-xs font-semibold uppercase tracking-[0.4em] text-fuchsia-300/80">{sponsor.tier}</p>
						<h3 class="text-lg font-semibold text-white">{sponsor.name}</h3>
						<p class="text-sm text-slate-300">{sponsor.description}</p>
					</article>
				))}
			</div>
		</div>
		</section>
	)}

	{hasFaqs && (
		<section id="faq" class="border-t border-slate-800 bg-slate-950/90">
		<div class="mx-auto flex w-full max-w-6xl flex-col gap-8 px-6 py-20">
			<header class="flex flex-col gap-3 sm:flex-row sm:items-end sm:justify-between">
				<div>
					<p class="text-xs font-semibold uppercase tracking-[0.4em] text-fuchsia-300/80">Know Before You Go</p>
					<h2 class="text-3xl font-semibold text-white sm:text-4xl">FAQs</h2>
				</div>
				<p class="max-w-xl text-sm text-slate-300">
					Operated directly from the WeBeFriends FAQ bundle, so your attendees always see the latest guidance.
				</p>
			</header>
			<div class="grid gap-6 md:grid-cols-2">
				{faqs.map((faq) => (
					<article key={faq.question} class="flex flex-col gap-3 rounded-3xl border border-slate-800 bg-slate-900/60 p-6">
						<h3 class="text-lg font-semibold text-white">{faq.question}</h3>
						<p class="text-sm text-slate-300">{faq.answer}</p>
					</article>
				))}
			</div>
		</div>
		</section>
	)}

	<section id="tickets" class="border-t border-slate-800 bg-gradient-to-br from-fuchsia-600/40 via-slate-950 to-slate-950">
		<div class="mx-auto flex w-full max-w-6xl flex-col gap-6 px-6 py-20 text-center">
			<p class="text-xs font-semibold uppercase tracking-[0.6em] text-fuchsia-200/80">Tickets</p>
			<h2 class="text-3xl font-semibold text-white sm:text-4xl">Reserve Your Spot Under the Moon</h2>
			<p class="mx-auto max-w-2xl text-sm text-slate-100/90">
				Ticketing hooks in through the WeBeFriends commerce API. Until then, use this anchor to connect your preferred provider or embed. Pricing tiers auto-populate once data is live.
			</p>
			<div class="flex flex-wrap justify-center gap-4">
				<a href="#" class="inline-flex items-center gap-2 rounded-full bg-white px-6 py-3 text-sm font-semibold uppercase tracking-wide text-slate-900 transition hover:bg-slate-100">
					Temporary Box Office
				</a>
				<a href="#" class="inline-flex items-center gap-2 rounded-full border border-white/70 px-6 py-3 text-sm font-semibold uppercase tracking-wide text-white transition hover:bg-white/10">
					Join Waitlist
				</a>
			</div>
			<p class="text-xs uppercase tracking-[0.4em] text-slate-200/80">
				Auto-update with live inventory once API integration completes.
			</p>
		</div>
	</section>

	{hasGallery && <GalleryModals images={gallery} />}
	{events.length > 0 && <EventModals events={events} />}

</BaseLayout>
